<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>PARKFACIL</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: monospace;
  background:#f5f7fa;
  display:flex;
  justify-content:center;
  padding:10px;
}
.card{
  background:#fff;
  width:100%;
  max-width:380px;
  padding:12px;
  border-radius:8px;
}
input,button{
  width:100%;
  padding:10px;
  margin-top:6px;
  font-size:16px;
}
button{
  border:none;
  border-radius:6px;
  color:#fff;
}
#btnIniciar{background:#2563eb}
#btnDetener{background:#dc2626}
#btnBuscar{background:#6b7280}
#btnWhats{background:#25d366}
#btnMail{background:#2563eb}

.ticket{
  width:58mm;
  margin:10px auto;
  font-size:12px;
}
.centro{text-align:center}
hr{border:none;border-top:1px dashed #000;margin:6px 0}
.logo-ticket{width:40px;display:block;margin:4px auto}
</style>
</head>

<body>
<div class="card">
  <div class="centro"><b>PARKFACIL</b></div>

  <input id="patente" placeholder="CX-PY-95" maxlength="8">

  <button id="btnIniciar">Iniciar estadía</button>
  <button id="btnDetener">Detener estadía</button>
  <button id="btnBuscar">Buscar patente</button>

  <button id="btnWhats">Enviar por WhatsApp</button>
  <button id="btnMail">Enviar por Email</button>

  <div id="resultado"></div>
</div>

<script>
/* CONFIG */
const VALOR_POR_MINUTO = 30;
const IVA = 0.19;

/* LOGO BASE64 OFFLINE (ejemplo) */
const LOGO_BASE64 =
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABR0lEQVQ4T6WTMUoDQRCFv9nYBMsEJBBE0sZCwsbCwsbGwsrCw8AE8g8QSYEktgIlpA8hEMJi5sLhz3p3Z3Zmdndz7zvnOe8+5zv9U4RQpJf1gm6AM2AF2AF6nG3AGn2qAq8gN5r8Kcz5nJH9KZV+Y4MZt8pM6DgkXyCFZg6bZpN5oYq7P0mH9h6xWZkqX0zJc5u+8nZ4nO0Cz2F+E8wBRa2Yx9Z7y2p6S7kV7zC1zA9q0+X8wOQ7G8D4Z+4XzX0Y+q5X9GZzYkAAAAASUVORK5CYII=";

/* FORMATO PATENTE */
const inputPatente = document.getElementById('patente');
inputPatente.addEventListener('input', ()=>{
  let raw = inputPatente.value.toUpperCase().replace(/[^A-Z0-9]/g,'');
  let out = raw.substring(0,2);
  if(raw.length>2) out+='-'+raw.substring(2,4);
  if(raw.length>4) out+='-'+raw.substring(4,6);
  inputPatente.value = out;
});

/* BOTONES */
btnIniciar.onclick = iniciar;
btnDetener.o
